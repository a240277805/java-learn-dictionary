# 千方官网开发工作

## 后端方案

1. 方案调研

  1.1  开源产品

| 产品                | 项目地址                            | 优点                                                         | 缺点                                 |
| ------------------- | ----------------------------------- | ------------------------------------------------------------ | ------------------------------------ |
| MCMS                | https://gitee.com/mingSoft/MCMS     | 系统成熟、流程完善、细节精致、使用简单。极低的成本投入，半分钟安装部署，选好模版一键导入； java 语言；自定义组件支持 | 付费(自定义组件)，bug较多            |
| PublicCMS           | https://gitee.com/sanluan/PublicCMS | java 语言；免费开源；架构科学；性能高                        | 不支持自定义组件；兼容性差；界面老旧 |
| ThinkJS             | https://gitee.com/arterli/CmsWing   | node 语言 前后端分离；界面美观，架构简单 易扩展；            | 不支持自定义组件；兼容性差；         |
| Ms-server;Ms-client |                                     | 自研CMS系统；易扩展；通用性强；易扩展；可配置性高            | 界面不美观，未商业化使用，bug较多；  |

  1.2  自己开发

   开发时间长，投入开发人力成本大，出于上线周期的考虑不采用。

# 所做工作

  ### 技术选型

### 前后端对接

### 开源项目源码剖析

### 开源项目改版

* 鉴权改版 ： 
  * 破解开源项目鉴权方式；
  * 增加软研特有鉴权方式。
  * 返回结构改版
  * 异常体系改版

* 废除非必要异常体系，
* 前后端约定新版异常报警制度；
* 改版后端报警拦截策略
* 日志改版
  * 日志打印输出位置；
  * 日志输出内容；
  * 日志压缩方式；
* 增加链路追踪
### 自定义组件开发
* 使用MCMS 开源自定义组件编辑器开发，
  * 设计组件，
  * 设计表，
  * 导入源码，
  * 故障 排查，
  * bug修复。

### 真实数据配置
* 配置官网后台真实数据
### 原始官网数据库导入，数据转化
* 招聘信息数据转换
*  新闻富文本数据转换
*  静态资源 数据转换
### 文件服务器搭建，兼容原始静态资源服务器数据。
### 千方用户账号数据接入
* LDAP用户数据接入
*  登录源码改版，适用于LDAP登录，登录验证。
*  用户账号初始权限分配，权限划分
### 部署
* java-server项目部署
* mysql 部署
   #### 部署方式
   aliyun docker 部署
   #### 部署步骤

   千方云主机中打镜像 ->保存镜像文件->copy到aliyun主机->aliyun主机加载镜像 ->重启
   
### 数据迁移
​    测试环境基础数据迁移到 aliyun环境；

​    测试环境 静态资源迁移到aliyun环境；

# 环境信息

| 环境     | 地址          | 部署方式   |
| -------- | ------------- | ---------- |
| 开发环境 | localhost     | 主机部署   |
| 测试环境 | 172.20.;60.23 | 主机部署   |
| 生产环境 | 120.26.127.98 | docker部署 |



# 建议

1.  增加设计评审定稿过程，开发前设计方案定稿，避免开发过程中修改造成前后设计不一致推翻重做，造成资源浪费
2. 新系统所需资料尽量开发前备齐。在开发过程中 很多页面的开发方式依赖于资源的提供情况，资源提供情况在开发过程中才确定，造成了时间浪费。
3. 产品开发需提供原型，讨论内容形成文档，尽量避免口头需求。以免造成产品开发理解不一致。
4. 后期官网尽量往自研后台方向扩展。原因：选择开源产品主要考虑时间成本，但后期会带来不易扩展，出bug 修复难度大，开源接口方案和自研设计接口方案不兼容，增加开发成本。