# maven  

## Maven 默认处理策略

* 最短路径优先

Maven 面对 D1 和 D2 时，会默认选择最短路径的那个 jar 包，即 D2。E->F->D2 比 A->B->C->D1 路径短 1。
* 最先声明优先

如果路径一样的话，举个�： A->B->C1, E->F->C2 ，两个依赖路径长度都是 2，那么就选择最先声明。

## 检测包冲突工具

```aidl
mvn dependency:help
mvn dependency:analyze
mvn dependency:tree
mvn dependency:tree -Dverbose
```

## 解决循环依赖

循环依赖 A依赖B ，B依赖A ，或者 A依赖B，B依赖C，C依赖A



解决方法　

1. 第一个办法是用build-helper-maven-plugin插件来规避。比如A依赖B，B依赖C，C依赖A的情况。这个插件提供了一种规避措施，即临时地将工程A、B、C合并成一个中间工程，编译出临时的模块D。然后A、B、C再分别依赖临时模块D进行编译
   　　
   　　这种方法可以解决无法构建的问题，但是只是一个规避措施，工程的依赖关系依然是混乱的
2. 第二个办法是通过重构，从根本上消除循环依赖

**如何重构**

目前也知道2个重构的思路
　　
　　第一个办法是平移，比如A和B互相依赖，那么可以将B依赖A的那部分代码，移动到工程B中，这样一来，B就不需要继续依赖A，只要A依赖B就可以了，从而消除循环依赖
　　
　　第二个办法是下移，比如A和B互相依赖，同时它们都依赖C，那么可以将B和A相互依赖的那部分代码，移动到工程C里，这样一来，A和B相互之间都不依赖，只继续依赖C，也可以消除循环依赖
　　
　　这两种重构方式都是可行的，具体采用哪种方式要根据实际情况来判断。不管采取哪种方式，都需要对代码进行修改，有时候并不是那么容易的



## 参考

[解决Maven项目相互依赖/循环依赖/双向依赖的问题](https://blog.csdn.net/leolu007/article/details/53079875)